<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Files</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <h2>Uploaded Files</h2>
    <table>
        <thead>
            <tr>
                <th>File Name</th>
                <th>File CID</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="files-list">
            <!-- Uploaded files will be dynamically populated here -->
        </tbody>
    </table>
    <button onclick="window.location.href='index.html'">Back</button>
</div>

<script>
    const adminFiles = JSON.parse(sessionStorage.getItem('adminFiles')) || [];
    const userFiles = JSON.parse(sessionStorage.getItem('userFiles')) || [];

    const allFiles = [...adminFiles, ...userFiles];
    const filesList = document.getElementById('files-list');

    allFiles.forEach(file => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${file.name}</td>
            <td>${file.cid}</td>
            <td><button onclick="deleteFile('${file.name}')">Delete</button></td>
        `;
        filesList.appendChild(row);
    });

    function deleteFile(fileName) {
        let adminFiles = JSON.parse(sessionStorage.getItem('adminFiles')) || [];
        let userFiles = JSON.parse(sessionStorage.getItem('userFiles')) || [];

        adminFiles = adminFiles.filter(file => file.name !== fileName);
        userFiles = userFiles.filter(file => file.name !== fileName);

        sessionStorage.setItem('adminFiles', JSON.stringify(adminFiles));
        sessionStorage.setItem('userFiles', JSON.stringify(userFiles));

        location.reload();
    }
</script>
</body>
</html>
